{% extends 'base.html' %}


{% block content %}


<form action="messages" method="GET">
  <div class="search-box">
    <input type="text" class="search-txt" name="query" placeholder="Search message">
    <button type="submit" class="search-btn"><i class="fa fa-search">Search</i></button>
  </div>
</form>


{% if with_drop and messages  %}
<div class="delete-email extra-row">
  <a href="delete_email?email={{messages[0].email}}" onclick="return confirm('Are you sure you want to delete this email?');">
    <h3>
      <span >Drop email {{messages[0].email}} ðŸ—‘</span>
    </h3>
  </a>
</div>
{% endif %}

<table>
  <tr class="extra-row">
    <th>Date</th>
    <th>Recipient</th>
    <th>Sender</th>
    <th>Subject</th>
  </tr>
    {% for msg in messages %}
      <tr class="one-msg">
        <td class="extra-row">{{msg.received_str}}</td>
        <td class="extra-row">{{msg.email}}</td>
        <td class="message-row">
          <img class="img-msg" src="https://cdn-icons-png.flaticon.com/512/8728/8728012.png" alt="msg" width="30" height="25">
          {{ msg.from_email }}
        </td>
        {% if msg.subject %}
        <td onclick="window.open('message/{{msg.id}}', 'name', 'width=900,height=800')" >Subject: {{msg.subject}}</td>
        {% endif %}
      </tr>
    {%endfor%}
</table>



<style>
  table {
    border-collapse: collapse;
    width: 100%;
  }
  th, td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid #ddd;
  }
  th {
    background-color: #f2f2f2;
    color: #333;
    font-weight: bold;
  }


  tr:hover {
    background-color: #f5f5f5;
  }
</style>

{% endblock %}